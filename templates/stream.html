{% extends app.request.isXmlHttpRequest() ? "ajax.html" : "layout.html" %}

{% block title %}{% if mentioned_entity is defined %}Notifications{% else %}Stream{% endif %}{% endblock %}

{% block content %}
<div id="stream" {% if mentioned_entity is defined %}data-mentioned-entity="{{ mentioned_entity }}"{% endif %}>
    {% if post_add %}
    <div class="stream-add-message-box">
        <form action="{{ path('stream_write') }}" method="message" class="stream-message-add form-inline">
            <div class="box box-highlight">
                <div class="box-content">
                    <div  class="form-inline">
                        <textarea class="message span11" name="message" rows="1" placeholder="Share whats new..."></textarea>
                        <a href="#" class="btn show-tooltip link-add-toggle" data-original-title="Add Link to Post"><i class="icon-link"></i></a>
                    </div>
                </div>
                <div class="box-footer actions hidden-content">
                    <div class="row-fluid link-add-form hidden-content">
                        <div class="span1 show-tooltip" data-original-title="Add Link">
                            <big><i class="icon-link pull-right"></i></big>
                        </div>
                        <div class="span11">
                            <input type="text" class="span10 link-add" data-parse-link="{{ path('bookmark_parse') }}" name="url" value="" />
                            <input type="button" class="btn link-add-btn" value="Add" />
                            <input type="hidden" class="link-add-title" value="" />
                            <input type="hidden" class="link-add-description" value="" />
                            <input type="hidden" class="link-add-image" value="" />
                        </div>
                    </div>

                    <div class="row-fluid link-add-details hidden-content">
                        <div class="span2">
                            <img class="link-add-image" width="100" />
                        </div>
                        <div class="span10">
                            <button type="button" class="close" data-dismiss="link-add-details">Ã—</button>
                            <p><span class="link-add-title"></span> &raquo;</p>
                            <p class="link-add-description"></p>
                        </div>
                    </div>

                    <div class="row-fluid">
                        <div class="span1 show-tooltip" data-original-title="Permissions">
                            <big><i class="icon-filter pull-right"></i></big>
                        </div>
                        <div class="span11">
                            <input type="text" class="span10" name="permissions" value="" placeholder="[+] Add more people" />
                            <button class="btn"><i class="icon-user"></i></button>
                        </div>
                    </div>

                    <input type="submit" class="stream-message-add-btn btn btn-success" value="Share" disabled="disabled" />
                    <input type="reset" class="btn stream-message-add-cancel" value="Cancel" />
                    <span class="status-length-left"></span>
                </div>
            </div>
        </form>
    </div>
    {% endif %}

    <div class="row-fluid stream-filters">
        <div class="span6">&nbsp;</div>
        <div class="span6">
            <div class="filter-post-type btn-group pull-right" data-toggle="buttons-radio">
                <button value="all" type="button" class="btn active show-tooltip" title="All Posts">All</button>
                <button value="status" type="button" class="btn show-tooltip" title="Show only Status Posts"><i class="icon-envelope"></i></button>
                {% if mentioned_entity is not defined %}
                <button value="essay" type="button" class="btn show-tooltip" title="Show only Essays"><i class="icon-pencil"></i></button>
                <button value="repost" type="button" class="btn show-tooltip" title="Show only Reposts"><i class="icon-retweet"></i></button>
                <button value="bookmark" type="button" class="btn show-tooltip" title="Show only Bookmarks"><i class="icon-link"></i></button>
                <button value="favorite" type="button" class="btn show-tooltip" title="Show only Favorited"><i class="icon-star"></i></button>
                {% else %}
                <button value="follower" type="button" class="btn show-tooltip" title="Show only Follower Notifications"><i class="icon-user"></i></button>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="stream-notifications"></div>

    <div class="stream-messages">
    {% for message in messages.messages %}
        {% include "_message.html" with {'message': message} %}
    {% endfor %}
        <div class="hidden-desktop visible-tablet visible-phone">
            <div class="alert alert-info" style="text-align:center;">
                <a href="#" class="loadOlderPosts">Load more posts</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

