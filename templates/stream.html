{% extends app.request.isXmlHttpRequest() ? "ajax.html" : "layout.html" %}

{% block title %}{% if mentioned_entity is defined %}Notifications{% else %}Stream{% endif %}{% endblock %}

{% block content %}
{% include "_stream.html" with {'messages': messages, 'post_add': post_add} %}
{% endblock %}

{% block javascripts %}
<script type="text/javascript" src="/js/stream.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        var app = new Zelten.MessageStreamApplication({
        {% if mentioned_entity is defined %}mentionedEntity: '{{ mentioned_entity}}',{% endif %}
            url: '{{ path('stream') }}',
            el: $("#stream"),
            collection: new Zelten.MessageCollection()
        });
        app.render();
    });
</script>
{% endblock %}
