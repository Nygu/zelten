{% extends app.request.isXmlHttpRequest() ? "ajax.html" : "layout.html" %}

{% block title %}{{ profile.name }}{% endblock %}

{% block content %}
{% include "_profile.html" with {"profile": profile, "size": 30} %}

<div id="stream">
    <div class="stream-notifications"></div>
    <div class="stream-messages"></div>
</div>

{% endblock %}
{% block javascripts %}
<script type="text/javascript" src="/js/stream.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        var app = new Zelten.MessageStreamApplication({
            entity: '{{ profile.entity }}',
            url: '{{ path('stream') }}',
            el: $("#stream"),
            collection: new Zelten.MessageCollection()
        });
        app.render();
        app.checkNewMessages();
    });
</script>
{% endblock %}
